<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git: Dezentrale Versionsverwaltung</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #1a1a1e;
            --bg-card: #242428;
            --bg-elevated: #2e2e33;
            --bg-hover: #38383e;
            --huk-gold: #FFD700;
            --white: #FFFFFF;
            --text: #E8E8EC;
            --text-muted: #9999A3;
            --border: rgba(255, 255, 255, 0.1);
            --melina: #FF6B6B;
            --niklas: #74B3E0;
            --gregor: #4ECDC4;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            overflow: hidden;
            height: 100vh; width: 100vw;
        }
        .scene {
            width: 100vw; height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 0.5rem 2rem 5.5rem;
            position: relative;
        }
        .step-title {
            font-size: 1.6rem; font-weight: 700;
            color: var(--white); text-align: center;
            min-height: 2.2rem;
            opacity: 0; transition: opacity 0.4s ease;
            margin-bottom: 0.3rem;
        }
        .step-title.visible { opacity: 1; }
        .diagram-container {
            flex: 1; width: 100%; max-width: 1000px;
            display: flex; align-items: center; justify-content: center;
        }
        .diagram-container svg { width: 100%; height: auto; max-height: 72vh; }
        svg text { font-family: 'Inter', system-ui, sans-serif; }

        .anim { opacity: 0; transition: opacity 0.6s ease; pointer-events: none; }
        .anim.visible { opacity: 1; pointer-events: auto; }

        .person-group {
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.6s ease;
            opacity: 0;
        }
        .person-group.visible { opacity: 1; }
        .person-group .repo-part { transition: opacity 0.5s ease; }
        .person-group.no-repo .repo-part { opacity: 0; }

        .commit { opacity: 0; transition: opacity 0.4s ease; }
        .commit.visible { opacity: 1; }

        .caption {
            color: var(--text-muted); font-size: 0.95rem;
            text-align: center; max-width: 720px;
            line-height: 1.6; min-height: 2.5rem;
            transition: opacity 0.4s ease; margin-top: 0.5rem;
        }
        .caption strong { color: var(--white); }
        .cmd {
            font-family: 'SF Mono', 'Fira Code', monospace;
            background: var(--bg-elevated); padding: 0.1rem 0.4rem;
            border-radius: 4px; font-size: 0.85rem; color: var(--huk-gold);
        }

        .problem-overlay {
            position: absolute; left: 50%; top: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26,26,30,0.96);
            border: 1px solid rgba(255,107,107,0.3);
            border-radius: 16px; padding: 2rem 2.5rem;
            max-width: 560px; opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none; z-index: 10;
        }
        .problem-overlay.visible { opacity: 1; pointer-events: auto; }
        .problem-overlay h3 { color: #FF6B6B; font-size: 1.3rem; margin-bottom: 1rem; }
        .problem-overlay ul { list-style: none; }
        .problem-overlay li {
            padding: 0.4rem 0 0.4rem 1.5rem; position: relative;
            line-height: 1.5; font-size: 0.95rem;
        }
        .problem-overlay li::before {
            content: ''; position: absolute; left: 0; top: 0.75rem;
            width: 8px; height: 8px; background: #FF6B6B; border-radius: 50%;
        }

        .title-overlay {
            position: absolute; inset: 0;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            background: linear-gradient(135deg, #1a1a1e, #222228, #1e1e24);
            z-index: 20; transition: opacity 0.6s ease;
        }
        .title-overlay.hidden { opacity: 0; pointer-events: none; }
        .title-overlay h1 { font-size: 3rem; font-weight: 700; color: var(--white); }
        .gold-line { width: 60px; height: 3px; background: var(--huk-gold); border-radius: 2px; margin: 1rem 0; }
        .title-overlay .subtitle { color: var(--huk-gold); font-size: 1.4rem; margin-bottom: 1.5rem; }
        .title-overlay .tagline { color: var(--text-muted); font-size: 1.1rem; }

        .nav-bar {
            position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
            display: flex; align-items: center; gap: 1rem; z-index: 100;
            background: rgba(36,36,40,0.9); padding: 0.5rem 1.2rem;
            border-radius: 30px; backdrop-filter: blur(8px); border: 1px solid var(--border);
        }
        .nav-bar button {
            background: none; border: none; color: var(--white);
            font-size: 1.4rem; cursor: pointer; padding: 0.3rem 0.6rem;
            border-radius: 6px; transition: background 0.2s;
        }
        .nav-bar button:hover { background: var(--bg-hover); }
        .nav-bar button:disabled { opacity: 0.3; cursor: default; }
        .nav-bar button:disabled:hover { background: none; }
        .nav-counter { color: var(--text-muted); font-size: 0.85rem; min-width: 50px; text-align: center; }
        .progress-bar {
            position: fixed; top: 0; left: 0; height: 3px;
            background: var(--huk-gold); transition: width 0.3s ease; z-index: 100;
        }
    </style>
</head>
<body>

<div class="progress-bar" id="progress"></div>

<div class="title-overlay" id="title-overlay">
    <h1>Dezentrale Versionsverwaltung</h1>
    <div class="gold-line"></div>
    <p class="subtitle">mit Git</p>
    <p class="tagline">Warum Git dezentral ist &mdash; und warum wir trotzdem einen Server brauchen</p>
</div>

<div class="scene" id="scene">
    <h2 class="step-title" id="step-title"></h2>

    <div class="diagram-container">
        <svg id="canvas" viewBox="0 0 1000 520">
            <defs>
                <marker id="arr-gold" viewBox="0 0 10 6" refX="9" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                    <path d="M0,0 L10,3 L0,6" fill="#FFD700"/>
                </marker>
                <marker id="arr-muted" viewBox="0 0 10 6" refX="9" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
                    <path d="M0,0 L10,3 L0,6" fill="#9999A3"/>
                </marker>
            </defs>

            <!-- ===== WORKFLOW (Step 1) ===== -->
            <g id="workflow" class="anim">
                <rect x="80" y="230" width="190" height="70" rx="10" fill="var(--bg-card)" stroke="var(--border)" stroke-width="1.5"/>
                <text x="175" y="257" text-anchor="middle" font-size="20">&#x1F4C1;</text>
                <text x="175" y="278" text-anchor="middle" fill="var(--text)" font-size="12" font-weight="600">Working Directory</text>
                <text x="175" y="293" text-anchor="middle" fill="var(--text-muted)" font-size="9">Dateien bearbeiten</text>
                <line x1="275" y1="265" x2="365" y2="265" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="320" y="255" text-anchor="middle" fill="var(--huk-gold)" font-size="11" font-weight="600">git add</text>
                <rect x="370" y="230" width="190" height="70" rx="10" fill="var(--bg-card)" stroke="var(--border)" stroke-width="1.5"/>
                <text x="465" y="260" text-anchor="middle" fill="var(--text)" font-size="12" font-weight="600">Staging Area</text>
                <text x="465" y="278" text-anchor="middle" fill="var(--text-muted)" font-size="9">&Auml;nderungen vormerken</text>
                <line x1="565" y1="265" x2="660" y2="265" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="612" y="255" text-anchor="middle" fill="var(--huk-gold)" font-size="11" font-weight="600">git commit</text>
                <rect x="665" y="230" width="200" height="70" rx="10" fill="var(--bg-card)" stroke="rgba(255,215,0,0.3)" stroke-width="2"/>
                <text x="765" y="257" text-anchor="middle" font-size="20">&#x1F5C4;&#xFE0F;</text>
                <text x="765" y="278" text-anchor="middle" fill="var(--white)" font-size="12" font-weight="600">Repository</text>
                <text x="765" y="293" text-anchor="middle" fill="var(--text-muted)" font-size="9">Commit gespeichert</text>
                <text x="500" y="340" text-anchor="middle" fill="var(--text-muted)" font-size="11">
                    Tipp: <tspan font-family="'SF Mono','Fira Code',monospace" fill="var(--huk-gold)">git status</tspan> zeigt jederzeit den aktuellen Zustand
                </text>
            </g>

            <!-- ===== MELINA ===== -->
            <g id="melina-group" class="person-group">
                <text x="0" y="-40" text-anchor="middle" font-size="32">&#x1F469;</text>
                <text x="0" y="-4" text-anchor="middle" fill="var(--melina)" font-size="14" font-weight="600">Melina</text>
                <g class="repo-part">
                    <rect x="-80" y="12" width="160" height="58" rx="8" fill="var(--bg-card)" stroke="var(--border)" stroke-width="1.5"/>
                    <text x="-45" y="35" text-anchor="start" font-size="15">&#x1F5C4;&#xFE0F;</text>
                    <text x="-26" y="36" text-anchor="start" fill="var(--text-muted)" font-size="10">Repository</text>
                    <g id="melina-c1" class="commit"><circle cx="-50" cy="52" r="7" fill="var(--huk-gold)"/><text x="-50" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C1</text></g>
                    <g id="melina-c2" class="commit"><circle cx="-28" cy="52" r="7" fill="var(--huk-gold)"/><text x="-28" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C2</text></g>
                    <g id="melina-c3" class="commit"><circle cx="-6" cy="52" r="7" fill="var(--huk-gold)"/><text x="-6" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C3</text></g>
                    <g id="melina-c4" class="commit"><circle cx="16" cy="52" r="7" fill="var(--huk-gold)"/><text x="16" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C4</text></g>
                    <g id="melina-c5" class="commit"><circle cx="38" cy="52" r="7" fill="var(--huk-gold)"/><text x="38" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C5</text></g>
                </g>
            </g>

            <!-- ===== NIKLAS ===== -->
            <g id="niklas-group" class="person-group">
                <text x="0" y="-40" text-anchor="middle" font-size="32">&#x1F468;</text>
                <text x="0" y="-4" text-anchor="middle" fill="var(--niklas)" font-size="14" font-weight="600">Niklas</text>
                <g class="repo-part">
                    <rect x="-80" y="12" width="160" height="58" rx="8" fill="var(--bg-card)" stroke="var(--border)" stroke-width="1.5"/>
                    <text x="-45" y="35" text-anchor="start" font-size="15">&#x1F5C4;&#xFE0F;</text>
                    <text x="-26" y="36" text-anchor="start" fill="var(--text-muted)" font-size="10">Repository</text>
                    <g id="niklas-c1" class="commit"><circle cx="-50" cy="52" r="7" fill="var(--huk-gold)"/><text x="-50" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C1</text></g>
                    <g id="niklas-c2" class="commit"><circle cx="-28" cy="52" r="7" fill="var(--huk-gold)"/><text x="-28" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C2</text></g>
                    <g id="niklas-c3" class="commit"><circle cx="-6" cy="52" r="7" fill="var(--huk-gold)"/><text x="-6" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C3</text></g>
                    <g id="niklas-c4" class="commit"><circle cx="16" cy="52" r="7" fill="var(--huk-gold)"/><text x="16" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C4</text></g>
                    <g id="niklas-c5" class="commit"><circle cx="38" cy="52" r="7" fill="var(--huk-gold)"/><text x="38" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C5</text></g>
                </g>
            </g>

            <!-- ===== GREGOR ===== -->
            <g id="gregor-group" class="person-group">
                <text x="0" y="-40" text-anchor="middle" font-size="32">&#x1F9D1;</text>
                <text x="0" y="-4" text-anchor="middle" fill="var(--gregor)" font-size="14" font-weight="600">Gregor</text>
                <g class="repo-part">
                    <rect x="-80" y="12" width="160" height="58" rx="8" fill="var(--bg-card)" stroke="var(--border)" stroke-width="1.5"/>
                    <text x="-45" y="35" text-anchor="start" font-size="15">&#x1F5C4;&#xFE0F;</text>
                    <text x="-26" y="36" text-anchor="start" fill="var(--text-muted)" font-size="10">Repository</text>
                    <g id="gregor-c1" class="commit"><circle cx="-50" cy="52" r="7" fill="var(--huk-gold)"/><text x="-50" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C1</text></g>
                    <g id="gregor-c2" class="commit"><circle cx="-28" cy="52" r="7" fill="var(--huk-gold)"/><text x="-28" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C2</text></g>
                    <g id="gregor-c3" class="commit"><circle cx="-6" cy="52" r="7" fill="var(--huk-gold)"/><text x="-6" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C3</text></g>
                    <g id="gregor-c4" class="commit"><circle cx="16" cy="52" r="7" fill="var(--huk-gold)"/><text x="16" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C4</text></g>
                    <g id="gregor-c5" class="commit"><circle cx="38" cy="52" r="7" fill="var(--huk-gold)"/><text x="38" y="52" dy="0.35em" text-anchor="middle" fill="var(--bg-dark)" font-size="7" font-weight="700">C5</text></g>
                </g>
            </g>

            <!-- ===== ARROWS: CLONE (Step 3) ===== -->
            <g id="arrows-clone" class="anim">
                <line x1="350" y1="175" x2="650" y2="175" stroke="var(--huk-gold)" stroke-width="2" stroke-dasharray="8,5" marker-end="url(#arr-gold)"/>
                <text x="500" y="165" text-anchor="middle" fill="var(--huk-gold)" font-size="12" font-weight="600">git clone</text>
                <text x="730" y="88" text-anchor="middle" fill="var(--text-muted)" font-size="11" font-style="italic">origin &rarr; Melina</text>
            </g>

            <!-- ===== ARROWS: PUSH/PULL (Step 4) ===== -->
            <g id="arrows-pushpull" class="anim">
                <line x1="650" y1="162" x2="350" y2="162" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="500" y="155" text-anchor="middle" fill="var(--huk-gold)" font-size="11" font-weight="600">git push</text>
                <line x1="350" y1="188" x2="650" y2="188" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="500" y="207" text-anchor="middle" fill="var(--huk-gold)" font-size="11" font-weight="600">git pull</text>
                <line x1="645" y1="215" x2="355" y2="215" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="500" y="232" text-anchor="middle" fill="var(--text-muted)" font-size="10" font-style="italic">origin</text>
            </g>

            <!-- ===== ARROWS: P2P (Steps 5-6) ===== -->
            <g id="arrows-p2p" class="anim">
                <line x1="740" y1="125" x2="260" y2="125" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="500" y="117" text-anchor="middle" fill="var(--text-muted)" font-size="10" font-style="italic">origin</text>
                <line x1="575" y1="412" x2="740" y2="150" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="685" y="295" text-anchor="middle" fill="var(--gregor)" font-size="10" transform="rotate(-40,685,295)">origin</text>
                <line x1="425" y1="412" x2="260" y2="150" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="315" y="295" text-anchor="middle" fill="var(--gregor)" font-size="10" transform="rotate(40,315,295)">melina</text>
            </g>

            <!-- ===== SERVER (Step 7) ===== -->
            <g id="server-group" class="anim">
                <rect x="400" y="218" width="200" height="65" rx="12" fill="rgba(255,215,0,0.12)" stroke="var(--huk-gold)" stroke-width="2"/>
                <text x="500" y="247" text-anchor="middle" fill="var(--huk-gold)" font-size="14" font-weight="700">&#x1F5A5;&#xFE0F; Git-Server</text>
                <text x="500" y="268" text-anchor="middle" fill="var(--text-muted)" font-size="10">(GitHub, GitLab, ...)</text>
            </g>

            <!-- ===== ARROWS: SERVER (Step 7) ===== -->
            <g id="arrows-server" class="anim">
                <line x1="260" y1="110" x2="405" y2="225" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="305" y="152" text-anchor="middle" fill="var(--text-muted)" font-size="10">push</text>
                <line x1="400" y1="255" x2="260" y2="128" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="310" y="200" text-anchor="middle" fill="var(--text-muted)" font-size="10">pull</text>
                <text x="175" y="155" text-anchor="middle" fill="var(--huk-gold)" font-size="10" font-weight="600">origin</text>

                <line x1="740" y1="110" x2="595" y2="225" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="695" y="152" text-anchor="middle" fill="var(--text-muted)" font-size="10">push</text>
                <line x1="600" y1="255" x2="740" y2="128" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="690" y="200" text-anchor="middle" fill="var(--text-muted)" font-size="10">pull</text>
                <text x="825" y="155" text-anchor="middle" fill="var(--huk-gold)" font-size="10" font-weight="600">origin</text>

                <line x1="488" y1="405" x2="488" y2="288" stroke="var(--huk-gold)" stroke-width="2" marker-end="url(#arr-gold)"/>
                <text x="470" y="350" text-anchor="middle" fill="var(--text-muted)" font-size="10">push</text>
                <line x1="512" y1="288" x2="512" y2="405" stroke="var(--text-muted)" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr-muted)"/>
                <text x="530" y="350" text-anchor="middle" fill="var(--text-muted)" font-size="10">pull</text>
                <text x="548" y="393" text-anchor="start" fill="var(--huk-gold)" font-size="10" font-weight="600">origin</text>
            </g>
        </svg>
    </div>

    <p class="caption" id="caption"></p>

    <div class="problem-overlay" id="problem-overlay">
        <h3>&#9888;&#65039; Warum funktioniert das so nicht?</h3>
        <ul>
            <li>Jeder m&uuml;sste seinen Rechner als <strong>Server</strong> bereitstellen (Firewall, dynamische IPs)</li>
            <li>Wer hat die <strong>&bdquo;Wahrheit&ldquo;</strong>? Welches Repository ist der aktuelle Stand?</li>
            <li>Was passiert, wenn jemand <strong>offline</strong> geht oder den Laptop zuklappt?</li>
            <li>Bei mehr als 3 Personen wird es <strong>un&uuml;bersichtlich</strong></li>
        </ul>
    </div>
</div>

<div class="nav-bar">
    <button id="btn-prev" aria-label="Zur&uuml;ck">&#x276E;</button>
    <span class="nav-counter" id="counter"></span>
    <button id="btn-next" aria-label="Weiter">&#x276F;</button>
</div>

<script>
(function () {
    var titleOverlay = document.getElementById('title-overlay');
    var stepTitle = document.getElementById('step-title');
    var caption = document.getElementById('caption');
    var progress = document.getElementById('progress');
    var counter = document.getElementById('counter');
    var btnPrev = document.getElementById('btn-prev');
    var btnNext = document.getElementById('btn-next');
    var problemOverlay = document.getElementById('problem-overlay');

    var workflow = document.getElementById('workflow');
    var melinaG = document.getElementById('melina-group');
    var niklasG = document.getElementById('niklas-group');
    var gregorG = document.getElementById('gregor-group');
    var arClone = document.getElementById('arrows-clone');
    var arPush = document.getElementById('arrows-pushpull');
    var arP2p = document.getElementById('arrows-p2p');
    var serverG = document.getElementById('server-group');
    var arServer = document.getElementById('arrows-server');

    var total = 8;
    var current = 0;

    function pos(el, x, y) { el.style.transform = 'translate(' + x + 'px,' + y + 'px)'; }
    function show(el) { el.classList.add('visible'); }
    function hide(el) { el.classList.remove('visible'); }
    function commits(who, n) {
        for (var i = 1; i <= 5; i++) {
            var c = document.getElementById(who + '-c' + i);
            if (i <= n) c.classList.add('visible'); else c.classList.remove('visible');
        }
    }

    function apply(n) {
        hide(workflow); hide(melinaG); hide(niklasG); hide(gregorG);
        hide(arClone); hide(arPush); hide(arP2p); hide(serverG); hide(arServer);
        problemOverlay.classList.remove('visible');
        stepTitle.classList.remove('visible');
        melinaG.classList.remove('no-repo');
        commits('melina', 0); commits('niklas', 0); commits('gregor', 0);

        if (n === 0) {
            titleOverlay.classList.remove('hidden');
            stepTitle.textContent = '';
            caption.innerHTML = '';
            return;
        }
        titleOverlay.classList.add('hidden');

        if (n === 1) {
            stepTitle.textContent = 'Melina arbeitet lokal';
            stepTitle.classList.add('visible');
            show(melinaG); melinaG.classList.add('no-repo');
            pos(melinaG, 500, 160);
            show(workflow);
            caption.innerHTML = 'Melinas Workflow: Dateien bearbeiten \u2192 vormerken \u2192 committen. <span class="cmd">git status</span> zeigt den aktuellen Zustand.';
        }
        else if (n === 2) {
            stepTitle.textContent = 'Melinas erste Commits';
            stepTitle.classList.add('visible');
            show(melinaG); pos(melinaG, 500, 200);
            commits('melina', 2);
            caption.innerHTML = 'Melina hat zwei Commits erstellt. Alles passiert <strong>lokal</strong> \u2014 kein Server n\u00f6tig.';
        }
        else if (n === 3) {
            stepTitle.textContent = 'Niklas klont Melinas Repository';
            stepTitle.classList.add('visible');
            show(melinaG); pos(melinaG, 270, 140);
            commits('melina', 2);
            show(niklasG); pos(niklasG, 730, 140);
            commits('niklas', 2);
            show(arClone);
            caption.innerHTML = 'Niklas erh\u00e4lt eine <strong>vollst\u00e4ndige Kopie</strong> inklusive der gesamten Historie. <span class="cmd">origin</span> zeigt auf Melinas Repo.';
        }
        else if (n === 4) {
            stepTitle.textContent = 'Push & Pull \u2014 Commits austauschen';
            stepTitle.classList.add('visible');
            show(melinaG); pos(melinaG, 270, 140);
            commits('melina', 4);
            show(niklasG); pos(niklasG, 730, 140);
            commits('niklas', 4);
            show(arPush);
            caption.innerHTML = 'Niklas pusht <strong>C3</strong>, Melina erstellt <strong>C4</strong>. Mit <span class="cmd">git push</span> und <span class="cmd">git pull</span> bleiben beide synchron.';
        }
        else if (n === 5) {
            stepTitle.textContent = 'Gregor kommt dazu \u2014 Peer-to-Peer';
            stepTitle.classList.add('visible');
            show(melinaG); pos(melinaG, 180, 90);
            commits('melina', 5);
            show(niklasG); pos(niklasG, 820, 90);
            commits('niklas', 4);
            show(gregorG); pos(gregorG, 500, 400);
            commits('gregor', 4);
            show(arP2p);
            caption.innerHTML = 'Gregor klont von Niklas und f\u00fcgt Melina als zweiten Remote hinzu: <span class="cmd">git remote add melina &lt;url&gt;</span>';
        }
        else if (n === 6) {
            stepTitle.textContent = '';
            show(melinaG); pos(melinaG, 180, 90);
            commits('melina', 5);
            show(niklasG); pos(niklasG, 820, 90);
            commits('niklas', 4);
            show(gregorG); pos(gregorG, 500, 400);
            commits('gregor', 4);
            show(arP2p);
            problemOverlay.classList.add('visible');
            caption.innerHTML = '';
        }
        else if (n === 7) {
            stepTitle.textContent = 'Die L\u00f6sung: Zentraler Git-Server';
            stepTitle.classList.add('visible');
            show(melinaG); pos(melinaG, 180, 70);
            commits('melina', 5);
            show(niklasG); pos(niklasG, 820, 70);
            commits('niklas', 5);
            show(gregorG); pos(gregorG, 500, 400);
            commits('gregor', 5);
            show(serverG); show(arServer);
            caption.innerHTML = 'Alle arbeiten gegen <strong>einen</strong> zentralen Server. <span class="cmd">origin</span> zeigt immer dorthin.<br>Dezentral in der <strong>Technik</strong>, zentral in der <strong>Organisation</strong>.';
        }
    }

    function goTo(n) {
        if (n < 0 || n >= total) return;
        current = n;
        apply(n);
        counter.textContent = (n + 1) + ' / ' + total;
        progress.style.width = ((n + 1) / total * 100) + '%';
        btnPrev.disabled = n === 0;
        btnNext.disabled = n === total - 1;
    }

    btnNext.addEventListener('click', function () { goTo(current + 1); });
    btnPrev.addEventListener('click', function () { goTo(current - 1); });
    document.addEventListener('keydown', function (e) {
        if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); goTo(current + 1); }
        if (e.key === 'ArrowLeft') { e.preventDefault(); goTo(current - 1); }
    });

    goTo(0);
})();
</script>

</body>
</html>
